---
title: lookAtMe总结之A面
author: 钱满
layout: post
---

各位姑娘们，我知道你们不是来看这个的，推荐看我的总结B版，一定能找到你爱的话题，请轻点 [这个链接：B版](http://blog.fuluchii.me/zuoshinizuo)

和小哈完成了lookatme这个小项目，时间真心紧张，第一天有饭局第二天中午又跑去做客，周日又算工作日，只能周六晚上干活。不过基本还是完成了当初的实现。里面遇到过坑，也用了一些新东西。我觉得这种自己瞎搞搞的用新东西写挺好的。稍微的总结一下。

1. 在写页面的时候用了seajs作模块化，感觉很方便，这个技术上来说好不好我不能说，因为毕竟JS接触的少，但是模块化的东西写出来之后代码管理确实很方便。写了一些类似nav,tab,toggle,progressbar这样的东西。其实我不是那么喜欢写前端，但是要是想完全不依赖他人写出一个能跑的网站，前端还是需要看的。这就好像化妆，虽然我平时上班是不化妆的但是技能是一定要点的，该放的时候要放的。

2. websocket的部分，不是第一次用，但是写的时候遇到了一些问题。使用了gevent-websocket来做后端服务器，不过一开始天真的以为wsock.send就是广播了，然后发现不对。解决方案就是放了一个数组来存放所有活着的连接。不过这个简单粗暴的方法是有问题的，出现过一个连接建立成功但是没有办法收到信息的例子，这样整个程序就卡死了。这个bug出现的机率还没有来得及看，需要后续跟进一下是怎么回事。之后有机会尝试一下SPDY,据说原生支持ws。

3. pymongo。说起来是被这个坑了下的。一个是findandmodify方法，这个是一个原子操作的方法，但我光知道他是原子的，不知道他只对第一个match的文档生效，后来看了doc才知道。第二点，用pymongo的find之类的方法返回了一个cursor对象，虽然把它存成了一个本地变量但是之后如果再对数据库做改动后再从cursor取值，这个值也是被改动之后的。这个真心搞了半天。

4. hubot。恩，这个值得多说一点点。hubot这个项目很早就看到过，但是这次才是真的把源码好好读了一遍。看完发现其实这个东西确实不难，但是设计还是很精巧的而且很易于拓展。而且我真心喜欢类似Brain之类的类名。超cute。同时也谢谢github没有给文档，有种被逼上梁山看源码的感觉。

5. 为了hubot写了个脚本，也属于逼上梁山写coffee，不喜欢。大概不会再写了。有种在写大杂烩的感觉，又是缩进又是箭头的各种搞不清楚。我觉得语法过于矫情了。恩。

6. 这次的hubot是跑在gt上面的。说实话本来都不想用Hubot了因为coffee有点那啥。已经用xmpp-node写了一个本地的xmppclient，但是比较恶心的是，但是当天晚上发现突然报错，连接有问题，找了一下发现3天前有人在issue里面提到了并且暂时没有稳定解决方案，只好放弃了。说道xmpp也是去学习了一下，希望有时间来总结。

7. fuluchii@gmail.com这个gt，不知道还有没有机会再亮起来。但是我真的很喜欢机器人。

8. 有一些本来想做的东西没有来得及做，比如说把数值转换成音乐什么的，虽然已经有了demo。我觉得人的心情曲折唱出来一定不会难听的，life is like a song.

9. 对了，还有一个关于python的import机制的问题。不赘述了。